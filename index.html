<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Unsakini by adonespitogo</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-dark.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/adonespitogo/unsakini">View On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/adonespitogo/unsakini/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/adonespitogo/unsakini/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>Unsakini</h1>
          <p>Very secure open source AES-encrypted bulletin board.</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/adonespitogo">adonespitogo</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></span>
        </div>

        <h2>
<a id="unsakini" class="anchor" href="#unsakini" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>UNSAKINI</h2>

<p><strong>Unsakini</strong> ("what is this") in Cebuano language is a web app that encrypts data in the client-side and sends encrypted data to the server. This way, only you can access your data so it stays safe from everyone else, even when the server gets compromised.</p>

<p>The source code is opensourced so you can review it and deploy it on your own server. Anyhow, you can always make use of the deployed app at <a href="https://www.unsakini.com">www.unsakini.com</a>.</p>

<h3>
<a id="planned-features" class="anchor" href="#planned-features" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Planned Features</h3>

<ul>
<li>[x] Encrypt data</li>
<li>[ ] Upload and encrypt files</li>
<li>[ ] Share encrypted data and files to other users</li>
</ul>

<hr>

<h3>
<a id="getting-started" class="anchor" href="#getting-started" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Getting Started</h3>

<p>Configure your local development environment first. There are four configuration files for each environment namely:</p>

<ul>
<li>
<code>application.json</code> - Configuration for the application like base url</li>
<li>
<code>database.json</code> - Database configuration</li>
<li>
<code>express-mail.json</code> - Configuration for the <a href="https://github.com/sorich87/express-mail">express-mail</a> plugin</li>
<li>
<code>security.json</code> - Configuration for the server AES passphrase, AES Inivialization Vector (IV) and Json Web Token (JWT) secret</li>
</ul>

<p>You can also use environment variables in the configuration files. Instead of passing a string as a value, pass an object with a key <code>use_env_variable</code>. Ex:</p>

<p>config/production/application.json</p>

<div class="highlight highlight-source-json"><pre>{
  <span class="pl-s"><span class="pl-pds">"</span>base_url<span class="pl-pds">"</span></span>: {
    <span class="pl-s"><span class="pl-pds">"</span>use_env_variable<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>BASE_URL<span class="pl-pds">"</span></span>
  }
}</pre></div>

<p>Instead of:</p>

<div class="highlight highlight-source-json"><pre>{
  <span class="pl-s"><span class="pl-pds">"</span>base_url<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>https://www.unsakini.com<span class="pl-pds">"</span></span>
}</pre></div>

<p>The production configuration already uses environment variables namely:</p>

<ul>
<li>
<code>DATABASE_URL</code> - In the form of <code>mysql://db_username:db_password@example.com/database_name</code>
</li>
<li>
<code>JWT_SECRET</code> - jwt secret for issuing authentication token</li>
<li>
<code>MAILER_FROM</code> - <a href="https://github.com/sorich87/express-mail">express-mail</a> <code>from</code> option (ex: <a href="mailto:pitogo.adones@gmail.com">pitogo.adones@gmail.com</a>)</li>
<li>
<code>MAILER_HOST</code> - <a href="https://github.com/sorich87/express-mail">express-mail</a> <code>host</code> option (ex: smtp.gmail.com)</li>
<li>
<code>MAILER_SECURE_CONNECTION</code> - <a href="https://github.com/sorich87/express-mail">express-mail</a> <code>secureConnection</code> (boolean)</li>
<li>
<code>MAILER_PORT</code> - <a href="https://github.com/sorich87/express-mail">express-mail</a> <code>port</code> option (ex: 465)</li>
<li>
<code>MAILER_USER</code> - <a href="https://github.com/sorich87/express-mail">express-mail</a> <code>auth.user</code> option (ex: <a href="mailto:pitogo.adones@gmail.com">pitogo.adones@gmail.com</a>)</li>
<li>
<code>MAILER_PASS</code> - <a href="https://github.com/sorich87/express-mail">express-mail</a> <code>auth.pass</code> option (password)</li>
<li>
<code>CRYPTO_PASSPHRASE</code> - Passphrase used for encrypting the data in the server-side (string)</li>
<li>
<code>CRYPTO_IV</code> - Initializatoin Vector used for encrypting the data in the server-side (string)</li>
</ul>

<p>Then install the needed packages:</p>

<pre><code>$ npm install -g gulp sequelize sequelize-cli typescript typings coffee-script angular-cli mysql
$ npm install
</code></pre>

<p>Build the Angular2 app</p>

<pre><code>$ gulp build
</code></pre>

<p>Run the express server</p>

<pre><code>$ npm start
</code></pre>

<p>Browse to <a href="http://localhost:3000">http://localhost:3000</a></p>

<h3>
<a id="development" class="anchor" href="#development" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Development</h3>

<p>Directory Structure</p>

<ul>
<li>
<code>./api</code> - Containes express app source</li>
<li>
<code>./src</code> - Contains Angular 2 app source</li>
<li>
<code>./config</code> - Contains configuration files</li>
<li>
<code>./migrations</code> - Contains Sequelize CLI migration files</li>
</ul>

<h3>
<a id="testing" class="anchor" href="#testing" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Testing</h3>

<p>Tests are not implemented yet since the app is still in architecture design process. Tests will be added after the architecture design is finalized and that codes will not be prone to massive changes.</p>

<h3>
<a id="technologies" class="anchor" href="#technologies" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Technologies</h3>

<ul>
<li>Server

<ul>
<li>
<a href="http://expressjs.com/">Express</a> as API server</li>
<li>
<a href="http://docs.sequelizejs.com/en/v3/">Sequelize</a> as ORM</li>
<li>
<a href="http://docs.sequelizejs.com/en/v3/docs/migrations/">Sequelize CLI</a> for database migrations</li>
</ul>
</li>
<li>Frontend

<ul>
<li><a href="https://angular.io/">Angular 2</a></li>
<li><a href="https://cli.angular.io/">Angular CLI</a></li>
</ul>
</li>
</ul>

<h3>
<a id="database-migration" class="anchor" href="#database-migration" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Database Migration</h3>

<p>We make use of Sequelize CLI in managing the database state.</p>

<ul>
<li>To create a migration file, run
<code>
$ sequelize migration:create --config ./config/development/database.json
</code>
</li>
<li>To run the migrations,
<code>
$ sequelize db:migrate --config ./config/development/database.json
</code>
</li>
<li>To undo the migrations,
<code>
$ sequelize db:migrate:undo --config ./config/development/database.json
</code>
</li>
</ul>

<p>Alternatively, I created node script files <code>db-migrate.js</code> and <code>migration-create.js</code> to make the command shorter. You'll just have to run <code>node db-migrate.js</code> to run the new migration files and <code>node migration-create.js</code> to create new migration files.</p>

<p>Check out the <a href="http://docs.sequelizejs.com/en/latest/docs/migrations/">Sequelize CLI</a> migrations docs on how to create migrations.</p>

<h3>
<a id="encryption-and-decryption-process" class="anchor" href="#encryption-and-decryption-process" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Encryption and Decryption Process</h3>

<p>If you look at the network traffic in the browser network tab, you'll see that sensitive data sent to the server are gibberesh. This is because they are encrypted using your private key before being sent. The data is being decrypted in the client side using the same key you supplied. The key is stored in your browser's localStorage and is never sent to the server. Therefore, only you can be able to access your data.</p>

<p>To increase the security, the data is also encrypted in the server before saving to the database, which adds a second layer of security.</p>

<p>The encryption and decryption process happens inside <a href="./src/app/services/crypto.service.ts">./src/app/services/crypto.service.ts</a> on the client-side and <a href="./api/services/crypto.coffee">./api/services/crypto.coffee</a> on the server-side.</p>

<p>The data is ecnrypted using <a href="https://en.wikipedia.org/wiki/Advanced_Encryption_Standard">Advanced Encryption System (AES)</a>, the most widely used and trusted encryption algorithm.</p>

<p><strong>Encryption Specifications</strong> (both server and client)</p>

<ul>
<li>Algorithm = <code>AES</code>
</li>
<li>Mode = <code>CBC</code>
</li>
<li>Padding = <code>Pkcs7</code>
</li>
<li>Key Derivation Function = <code>PBKDF2</code>
</li>
<li>Key Size = <code>256</code>
</li>
<li>Initialization Vector Size = <code>128</code>
</li>
<li>PBKDF2 iterations = <code>500</code>
</li>
</ul>

<h3>
<a id="author" class="anchor" href="#author" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Author</h3>

<p><a href="http://adonespitogo.com">Adones Pitogo</a></p>

<h3>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>License</h3>

<p>Released under the terms of <a href="https://opensource.org/licenses/MIT">MIT</a> License.</p>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>
